{% extends 'base.html' %}

{% block title %}Demo - SAE502{% endblock %}

{% block content %}
<h2>Démonstration</h2>
<p>Cette page démontre l'intégration des composants principaux.</p>

<div class="grid">
    <div class="card">
        <div class="card-title">Cache Redis</div>
        <div class="card-value">{{ visit_count }}</div>
        <div class="card-desc">visites</div>
    </div>

    <div class="card">
        <div class="card-title">PostgreSQL</div>
        <div class="card-value" style="font-size: 1.25rem;">Connecté</div>
        <div class="card-desc">base opérationnelle</div>
    </div>

    <div class="card">
        <div class="card-title">Timestamp</div>
        <div class="card-value" style="font-size: 1.25rem;">{{ timestamp|date:"H:i:s" }}</div>
        <div class="card-desc">{{ timestamp|date:"d/m/Y" }}</div>
    </div>
</div>

<div class="info">
    <h3>Fonctionnement</h3>
    <ul>
        <li><strong>Compteur</strong> : stocké dans Redis via <code>cache.get()</code></li>
        <li><strong>Base de données</strong> : Django ORM → PostgreSQL</li>
        <li><strong>Timestamp</strong> : généré avec <code>timezone.now()</code></li>
    </ul>
</div>

<p class="hint">Rechargez la page pour voir le compteur augmenter.</p>
{% endblock %}